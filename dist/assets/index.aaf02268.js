var q=Object.defineProperty,K=Object.defineProperties;var H=Object.getOwnPropertyDescriptors;var P=Object.getOwnPropertySymbols;var J=Object.prototype.hasOwnProperty,Q=Object.prototype.propertyIsEnumerable;var A=(r,e,t)=>e in r?q(r,e,{enumerable:!0,configurable:!0,writable:!0,value:t}):r[e]=t,l=(r,e)=>{for(var t in e||(e={}))J.call(e,t)&&A(r,t,e[t]);if(P)for(var t of P(e))Q.call(e,t)&&A(r,t,e[t]);return r},i=(r,e)=>K(r,H(e));var u=(r,e,t)=>(A(r,typeof e!="symbol"?e+"":e,t),t);import{R as a,L as g,a as p,c as y,r as v,b as V,B as W,S as X,d as b,e as Y,f as ee,g as re,h as ae,P as te,i as oe}from"./vendor.3654d260.js";const se=function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const s of document.querySelectorAll('link[rel="modulepreload"]'))o(s);new MutationObserver(s=>{for(const n of s)if(n.type==="childList")for(const c of n.addedNodes)c.tagName==="LINK"&&c.rel==="modulepreload"&&o(c)}).observe(document,{childList:!0,subtree:!0});function t(s){const n={};return s.integrity&&(n.integrity=s.integrity),s.referrerpolicy&&(n.referrerPolicy=s.referrerpolicy),s.crossorigin==="use-credentials"?n.credentials="include":s.crossorigin==="anonymous"?n.credentials="omit":n.credentials="same-origin",n}function o(s){if(s.ep)return;s.ep=!0;const n=t(s);fetch(s.href,n)}};se();const ne=r=>a.createElement("nav",{id:"menu"},a.createElement(g,{to:"/"},"Usuarios"),a.createElement(g,{to:"/tareas"},"Tareas")),C="usuarios_traer_todos",I="usuarios_cargando",O="usuarios_error";var ce=Object.freeze({__proto__:null,[Symbol.toStringTag]:"Module",TRAER_TODOS:C,CARGANDO:I,ERROR:O});const le=()=>async r=>{r({type:I});try{const e=await p.get("https://jsonplaceholder.typicode.com/users");r({type:C,payload:e.data})}catch(e){console.log("Error: ",e.message),r({type:O,payload:"Informacion de usuarios, no disponible."})}};var j=Object.freeze({__proto__:null,[Symbol.toStringTag]:"Module",traerTodos:le});const E=()=>a.createElement("div",{className:"center"},a.createElement("div",{className:"lds-roller"},a.createElement("div",null),a.createElement("div",null),a.createElement("div",null),a.createElement("div",null),a.createElement("div",null),a.createElement("div",null),a.createElement("div",null),a.createElement("div",null))),h=r=>a.createElement("h2",{className:"center rojo"},r.mensaje),ie=r=>{const e=()=>r.usuarios.map((t,o)=>a.createElement("tr",{key:t.id},a.createElement("td",null,t.name),a.createElement("td",null,t.email),a.createElement("td",null,t.website),a.createElement("td",null,a.createElement(g,{to:`/publicaciones/${o}`},a.createElement("div",{className:"eye-solid icon"})))));return a.createElement("div",null,a.createElement("table",{className:"tabla"},a.createElement("thead",null,a.createElement("tr",null,a.createElement("th",null,"Nombre"),a.createElement("th",null,"Correo"),a.createElement("th",null,"Enlace"))),a.createElement("tbody",null,e())))},ue=r=>r.usuariosReducer;var me=y(ue)(ie);class de extends v.exports.Component{constructor(){super();u(this,"ponerContenido",()=>this.props.cargando?a.createElement(E,null):this.props.error?a.createElement(h,{mensaje:this.props.error}):a.createElement(me,null));this.state={usuarios:[{nombre:"Rodolfo",correo:"rodolfo@saldivar.com",enlace:"rodolfo.com"},{nombre:"Platzi",correo:"platzi@platzi.com",enlace:"platzi.com"}]}}componentDidMount(){this.props.usuarios.length||this.props.traerTodos()}render(){return a.createElement("div",null,a.createElement("h1",null,"Usuarios"),this.ponerContenido())}}const pe=r=>r.usuariosReducer;var ye=y(pe,j)(de);const Ee=r=>{if(r.com_error)return a.createElement(h,{mensaje:r.com_error});if(r.com_cargando&&!r.comentarios.length)return a.createElement(E,null);const e=()=>r.comentarios.map(t=>a.createElement("li",{key:t.id},a.createElement("b",null,a.createElement("u",null,t.email)),a.createElement("br",null),t.body));return a.createElement("ul",null,e())},he=({publicacionesReducer:r})=>r;var ge=y(he)(Ee);const S="publicaciones_actualizar",N="publicaciones_cargando",D="publicaciones_error",z="comentarios_cargando",M="comentarioss_error",w="comentarios_actualizar",{TRAER_TODOS:be}=ce,fe=r=>async(e,t)=>{e({type:N});const{usuarios:o}=t().usuariosReducer,{publicaciones:s}=t().publicacionesReducer,n=o[r].id;try{const m=(await p.get(`https://jsonplaceholder.typicode.com/posts?userId=${n}`)).data.map(Z=>i(l({},Z),{comentarios:[],abierto:!1})),d=[...s,m];e({type:S,payload:d});const R=d.length-1,_=[...o];_[r]=i(l({},o[r]),{publicaciones_key:R}),e({type:be,payload:_})}catch(c){console.log(c.message),e({type:D,payload:"Publicaciones no disponibles."})}},Te=(r,e)=>(t,o)=>{const{publicaciones:s}=o().publicacionesReducer,n=s[r][e],c=i(l({},n),{abierto:!n.abierto}),m=[...s];m[r]=[...s[r]],m[r][e]=c,t({type:S,payload:m})},Re=(r,e)=>async(t,o)=>{t({type:z});const{publicaciones:s}=o().publicacionesReducer,n=s[r][e];try{const c=await p.get(`https://jsonplaceholder.typicode.com/comments?postId=${n.id}`),m=i(l({},n),{comentarios:c.data}),d=[...s];d[r]=[...s[r]],d[r][e]=m,t({type:w,payload:d})}catch(c){console.log(c.message),t({type:M,payload:"Comentarios no disponibles."})}};var _e=Object.freeze({__proto__:null,[Symbol.toStringTag]:"Module",traerPorUsuario:fe,abrirCerrar:Te,traerComentarios:Re});const{traerTodos:ve}=j,{traerPorUsuario:Ae,abrirCerrar:Ce,traerComentarios:Ie}=_e;class Oe extends v.exports.Component{constructor(){super(...arguments);u(this,"ponerUsuario",()=>{const{usuariosReducer:e,match:{params:{key:t}}}=this.props;if(e.error)return a.createElement(h,{mensaje:e.error});if(!e.usuarios.length||e.cargando)return a.createElement(E,null);const o=e.usuarios[t].name;return a.createElement("h1",null,"Publicaciones de ",o)});u(this,"ponerPublicaciones",()=>{const{usuariosReducer:e,usuariosReducer:{usuarios:t},publicacionesReducer:o,publicacionesReducer:{publicaciones:s},match:{params:{key:n}}}=this.props;if(!t.length||e.error)return;if(o.cargando)return a.createElement(E,null);if(o.error)return a.createElement(h,{mensaje:o.error});if(!s.length||!("publicaciones_key"in t[n]))return;const{publicaciones_key:c}=t[n];return this.mostrarInfo(s[c],c)});u(this,"mostrarInfo",(e,t)=>e.map((o,s)=>a.createElement("div",{className:"pub_titulo",key:o.id,onClick:()=>this.mostrarComentarios(t,s,o.comentarios)},a.createElement("h2",null,o.title),a.createElement("h3",null,o.body),o.abierto?a.createElement(ge,{comentarios:o.comentarios}):"")));u(this,"mostrarComentarios",(e,t,o)=>{this.props.abrirCerrar(e,t),o.length||this.props.traerComentarios(e,t)})}async componentDidMount(){const{usuariosTraerTodos:e,publicacionesTraerPorUsuario:t,match:{params:{key:o}}}=this.props;this.props.usuariosReducer.usuarios.length||await e(),!this.props.usuariosReducer.error&&("publicaciones_key"in this.props.usuariosReducer.usuarios[o]||await t(o))}render(){return a.createElement("div",null,this.ponerUsuario(),this.ponerPublicaciones())}}const Se=({usuariosReducer:r,publicacionesReducer:e})=>({usuariosReducer:r,publicacionesReducer:e}),Ue={usuariosTraerTodos:ve,publicacionesTraerPorUsuario:Ae,abrirCerrar:Ce,traerComentarios:Ie};var $e=y(Se,Ue)(Oe);const U="tareas_traer_todas",f="tareas_cargando",T="tareas_error",x="tareas_cambio_usuario_id",L="tareas_cambio_titulo",$="tareas_guardar",k="tareas_actualizar",G="tareas_limpiar",Pe=()=>async r=>{r({type:f});try{const e=await p.get("https://jsonplaceholder.typicode.com/todos"),t={};e.data.map(o=>t[o.userId]=i(l({},t[o.userId]),{[o.id]:l({},o)})),r({type:U,payload:t})}catch(e){console.log("Error: ",e.message),r({type:T,payload:"Informacion de tareas, no disponible."})}},je=r=>e=>{e({type:x,payload:r})},Ne=r=>e=>{e({type:L,payload:r})},De=r=>async e=>{e({type:f});try{await p.post("https://jsonplaceholder.typicode.com/todos",r),e({type:$})}catch(t){console.log(t.message),e({type:T,payload:"Intente mas tarde."})}},ze=r=>async e=>{e({type:f});try{await p.put(`https://jsonplaceholder.typicode.com/todos/${r.id}`,r),e({type:$})}catch(t){console.log(t.message),e({type:T,payload:"Intente mas tarde."})}},Me=(r,e)=>(t,o)=>{const{tareas:s}=o().tareasReducer,n=s[r][e],c=l({},s);c[r]=l({},s[r]),c[r][e]=i(l({},s[r][e]),{completed:!n.completed}),t({type:k,payload:c})},we=r=>async e=>{e({type:f});try{await p.delete(`https://jsonplaceholder.typicode.com/todos/${r}`),e({type:U,payload:{}})}catch(t){console.log(t.message),e({type:T,payload:"Servicio no disponible."})}},xe=()=>r=>{r({type:G})};var B=Object.freeze({__proto__:null,[Symbol.toStringTag]:"Module",traerTodas:Pe,cambioUsuarioId:je,cambioTitulo:Ne,agregar:De,editar:ze,cambioCheck:Me,eliminar:we,limpiarForma:xe});class Le extends v.exports.Component{constructor(){super(...arguments);u(this,"mostrarContenido",()=>{const{tareas:e,cargando:t,error:o}=this.props;return t?a.createElement(E,null):o?a.createElement(h,{mensaje:o}):Object.keys(e).map(s=>a.createElement("div",{key:s},a.createElement("h2",null,"Usuario ",s),a.createElement("div",{className:"contenedor-tareas"},this.ponerTareas(s))))});u(this,"ponerTareas",e=>{const{tareas:t,cambioCheck:o,eliminar:s}=this.props,n=l({},t[e]);return Object.keys(n).map(c=>a.createElement("div",{key:c},a.createElement("input",{type:"checkbox",defaultChecked:n[c].completed,onChange:()=>o(e,c)}),n[c].title,a.createElement("button",{className:"m_left"},a.createElement(g,{to:`/tareas/guardar/${e}/${c}`},"Editar")),a.createElement("button",{className:"m_left",onClick:()=>s(c)},"Eliminar")))})}componentDidMount(){Object.keys(this.props.tareas).length||this.props.traerTodas()}componentDidUpdate(){const{tareas:e,cargando:t,traerTodas:o}=this.props;!Object.keys(e).length&&!t&&o()}render(){return a.createElement("div",null,a.createElement("button",null,a.createElement(g,{to:"/tareas/guardar"},"Agregar")),this.mostrarContenido())}}const ke=({tareasReducer:r})=>r;var Ge=y(ke,B)(Le);class Be extends v.exports.Component{constructor(){super(...arguments);u(this,"cambioUsuarioId",e=>{this.props.cambioUsuarioId(e.target.value)});u(this,"cambioTitulo",e=>{this.props.cambioTitulo(e.target.value)});u(this,"guardar",()=>{const{match:{params:{usu_id:e,tar_id:t}},tareas:o,usuario_id:s,titulo:n,agregar:c,editar:m}=this.props,d={userID:s,title:n,completed:!1};if(e&&t){const R=o[e][t],_=i(l({},d),{completed:R.completed,id:R.id});m(_)}else c(d)});u(this,"deshabilitar",()=>{const{usuario_id:e,titulo:t,cargando:o}=this.props;return!!(o||!e||!t)});u(this,"mostrarAccion",()=>{const{error:e,cargando:t}=this.props;if(t)return a.createElement(E,null);if(e)return a.createElement(h,{mensaje:e})})}componentDidMount(){const{match:{params:{usu_id:e,tar_id:t}},tareas:o,cambioUsuarioId:s,cambioTitulo:n,limpiarForma:c}=this.props;if(e&&t){const m=o[e][t];s(m.userId),n(m.title)}else c()}render(){return a.createElement("div",null,this.props.regresar?a.createElement(V,{to:"/tareas"}):"",a.createElement("h1",null,"Guardar Tarea"),"Usuario id:",a.createElement("input",{type:"number",value:this.props.usuario_id,onChange:this.cambioUsuarioId}),a.createElement("br",null),a.createElement("br",null),"Titulo:",a.createElement("input",{value:this.props.titulo,onChange:this.cambioTitulo}),a.createElement("br",null),a.createElement("br",null),a.createElement("button",{onClick:this.guardar,disabled:this.deshabilitar()},"Guardar"),this.mostrarAccion())}}const Fe=({tareasReducer:r})=>r;var F=y(Fe,B)(Be);const Ze=()=>a.createElement(W,null,a.createElement(ne,null),a.createElement("div",{className:"margen"},a.createElement(X,null,a.createElement(b,{exact:!0,path:"/",component:ye}),a.createElement(b,{exact:!0,path:"/tareas",component:Ge}),a.createElement(b,{exact:!0,path:"/publicaciones/:key",component:$e}),a.createElement(b,{exact:!0,path:"/tareas/guardar",component:F}),a.createElement(b,{exact:!0,path:"/tareas/guardar/:usu_id/:tar_id",component:F})))),qe={usuarios:[],cargando:!1,error:""};var Ke=(r=qe,e)=>{switch(e.type){case C:return i(l({},r),{usuarios:e.payload,cargando:!1,error:""});case I:return i(l({},r),{cargando:!0});case O:return i(l({},r),{error:e.payload,cargando:!1});default:return r}};const He={publicaciones:[],cargando:!1,error:"",com_cargando:!1,com_error:""};var Je=(r=He,e)=>{switch(e.type){case S:return i(l({},r),{publicaciones:e.payload,cargando:!1,error:""});case N:return i(l({},r),{cargando:!0});case D:return i(l({},r),{error:e.payload,cargando:!1});case w:return i(l({},r),{publicaciones:e.payload,com_cargando:!1,com_error:""});case z:return i(l({},r),{com_cargando:!0});case M:return i(l({},r),{error:e.payload,com_cargando:!1});default:return r}};const Qe={tareas:{},cargando:!1,error:"",usuario_id:"",titulo:"",regresar:!1};var Ve=(r=Qe,e)=>{switch(e.type){case U:return i(l({},r),{tareas:e.payload,cargando:!1,error:"",regresar:!1});case f:return i(l({},r),{cargando:!0});case T:return i(l({},r),{error:e.payload,cargando:!1});case x:return i(l({},r),{usuario_id:e.payload});case L:return i(l({},r),{titulo:e.payload});case $:return i(l({},r),{tareas:{},cargando:!1,error:"",regresar:!0,usuario_id:"",titulo:""});case k:return i(l({},r),{tareas:e.payload});case G:return i(l({},r),{usuario_id:"",titulo:""});default:return r}},We=Y({usuariosReducer:Ke,publicacionesReducer:Je,tareasReducer:Ve});const Xe=ee(We,{},re(oe));ae.render(a.createElement(te,{store:Xe},a.createElement(Ze,null)),document.getElementById("root"));
